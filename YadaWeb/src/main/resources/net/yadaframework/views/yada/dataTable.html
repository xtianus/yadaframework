<!DOCTYPE html>
<html xmlns:yada="http://www.yadaframework.net" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
</head>

<!--/*
Template for <yada:datatable> resulting HTML.
It is used internally by the yada dialect processor to render the <yada:datatable> tag but could be included directly in a HTML template if needed.
*/-->

<body th:remove="tag">

<div class="yadaDataTableBlock" th:with="html=${yadaDataTable.HTML}">

	<table th:id="${yadaDataTable.id}" class="table" th:classappend="${html.cssClasses}?:'table-striped no-wrap'">
		<thead>
			<tr>
				<th th:if="${html.selectCheckbox}" th:with="title=${html.selectCheckboxTitle}">
					<input type="checkbox" class="yada_columnSelector" th:title="title?#{title}">
				</th>
				<th th:each="column : ${html.columns}" th:text="#{${column.headerText}}">Name</th>
				<th th:if="${!#strings.isEmpty(html.commandsTitle)}" th:with="title=${html.commandsTitle}" th:text="title?#{title}">Commands</th>
			</tr>
		</thead>
		<tfoot th:if="${html.showFooter}">
			<tr>
				<td th:if="${html.selectCheckbox}"></td> <!-- /* Empty for select column */-->
				<th th:each="column : ${html.columns}"></th>
				<td th:if="${html.commandsTitle}"></td> <!-- /* Empty for command column */-->
			</tr>
		</tfoot>
	</table>

	<!--/* Toolbar */-->
	<div th:with="buttonSequence=${yadaDataTable.id+'-'+@yadaWebUtil.randomId6+'-button-'}">
		<th:block th:each="button : ${html.buttons}">
			<a class="btn" th:id="${#ids.seq(buttonSequence)}"
				th:href="__${button.url?:'javascript:void(0);'}__"
				th:classappend="|${button.ajax?'yadaAjax':''} ${button.toolbarCssClass?:''}|">
				<th:block th:if="${button.icon!=null}" th:utext="${button.icon}"><i class="bi bi-pencil"></i></th:block>
				<span th:text="${button.text}">Add</span>
			</a>
			<script th:inline="javascript">
				yada.ready(function(){
					const buttonId = /*[[${#ids.prev(buttonSequence)}]]*/ "dummy";
					const buttonData = /*[[${button}]]*/ "dummy";
					const dataTableId = /*[[${yadaDataTable.id}]]*/ "dummy";
					yada.dtMakeButtonHandler(buttonId, buttonData, dataTableId);
				});
			</script>
		</th:block>
	</div>
	
	<!--/* Initialization code */-->
	<script th:inline="javascript">
		yada.ready(function(){
			const dataTableId = /*[[${yadaDataTable.id}]]*/ "dummy";
			const dataTableOptionsJson = /*[[${yadaDataTable.options}]]*/ "dummy";
			const ajaxUrl = /*[[@{__${yadaDataTable.ajaxUrl}__}]]*/ "dummy";
			dataTableOptionsJson.ajax = function(data, callback, settings){
				yada.dtAjaxCaller(data, callback, settings, dataTableId, ajaxUrl);
			}
			// Preprocessor can override, add, delete configured options
			const preprocessorName = /*[[${preprocessor}]]*/ ""; // Becomes 'null' when missing
			const preprocessor = window[preprocessorName];
			if (typeof preprocessor === "function") {
			    preprocessor(dataTableOptionsJson);
			}
			// TODO remove userLanguage
			const userLanguage = /*[[${#locale.language}]]*/ "dummy";
			window[dataTableId] = yada.dataTable(dataTableId, dataTableOptionsJson);
		});
	
	</script>

</div>
	
</body>