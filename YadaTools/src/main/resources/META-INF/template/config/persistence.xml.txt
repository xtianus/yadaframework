<persistence version="3.0"
	xmlns="https://jakarta.ee/xml/ns/persistence"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="https://jakarta.ee/xml/ns/persistence https://jakarta.ee/xml/ns/persistence/persistence_3_0.xsd">

	<!-- This file is only needed to generate the db schema -->

	<persistence-unit name="yadaPersistenceUnit">
		
		<exclude-unlisted-classes>false</exclude-unlisted-classes> <!-- currently useless -->
		
		<!-- Application entities -->
		<!-- When autodiscovery works, you only need to list the Yada classes or any @Entity that is implemented
			in an external project, but since autodiscovery stopped working, also same-project classes must be listed -->
		<class>${basePackage}.persistence.entity.${acronymCapitalized}RegistrationRequest</class>
		<class>${basePackage}.persistence.entity.UserProfile</class>
		
		<!-- These are used for schema generation. You can remove the ones you don't need but
			 you will get a schema generation error if some needed class is missing -->
		<class>net.yadaframework.persistence.entity.YadaAttachedFile</class>
		<class>net.yadaframework.persistence.entity.YadaBrowserId</class>
		<class>net.yadaframework.persistence.entity.YadaClause</class>
		<class>net.yadaframework.persistence.entity.YadaJob</class>
		<class>net.yadaframework.persistence.entity.YadaPersistentEnum</class>
	 	<% out.print (yadaWebSecurityFound?"":"<!--"); %> 
		<class>net.yadaframework.security.persistence.entity.YadaUserCredentials</class>
		<class>net.yadaframework.security.persistence.entity.YadaUserProfile</class>
		<class>net.yadaframework.security.persistence.entity.YadaRegistrationRequest</class>
		<class>net.yadaframework.security.persistence.entity.YadaSocialCredentials</class>
		<class>net.yadaframework.security.persistence.entity.YadaAutoLoginToken</class>
		<class>net.yadaframework.security.persistence.entity.YadaTicket</class>
		<class>net.yadaframework.security.persistence.entity.YadaTicketMessage</class>
		<class>net.yadaframework.security.persistence.entity.YadaUserMessage</class>
		<class>net.yadaframework.security.persistence.entity.YadaCommentMessage</class>
	 	<% out.print (yadaWebSecurityFound?"":"-->"); %>
	 	<% out.print (yadaWebCmsFound?"":"<!--"); %> 
		<class>net.yadaframework.cms.persistence.entity.YadaArticle</class>
		<class>net.yadaframework.cms.persistence.entity.YadaProduct</class>
	   	<% out.print (yadaWebCmsFound?"":"-->"); %>
	 	<% out.print (yadaWebCommerceFound?"":"<!--"); %> 
		<class>net.yadaframework.commerce.persistence.entity.YadaAddress</class>
		<class>net.yadaframework.commerce.persistence.entity.YadaCart</class>
		<class>net.yadaframework.commerce.persistence.entity.YadaCartItem</class>
		<class>net.yadaframework.commerce.persistence.entity.YadaCommerceArticle</class>
		<class>net.yadaframework.commerce.persistence.entity.YadaOrder</class>
		<class>net.yadaframework.commerce.persistence.entity.YadaOrderItem</class>
		<class>net.yadaframework.commerce.persistence.entity.YadaTransaction</class>
	  	<% out.print (yadaWebCommerceFound?"":"-->"); %>
		 
		<properties>
			<!-- No need for database connection info when using the non-standard "hibernate.dialect"
			<property name="jakarta.persistence.jdbc.driver" value="com.mysql.cj.jdbc.Driver"/>
			<property name="jakarta.persistence.jdbc.user" value="${acronym}user$env"/>
			<property name="jakarta.persistence.jdbc.password" value="$dbpwd"/>
			<property name="jakarta.persistence.jdbc.url" value="jdbc:mysql://localhost/${acronym}db$env?autoReconnect=true&amp;useUnicode=true&amp;characterEncoding=UTF-8&amp;useSSL=false&amp;allowPublicKeyRetrieval=true"/>
 			-->
 			<property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect"/>
			<property name="jakarta.persistence.schema-generation.scripts.action" value="create"/>
			<property name="jakarta.persistence.schema-generation.scripts.create-target" value="schema/${acronym}.sql"/>
			<property name="hibernate.archive.autodetection" value="class" /> <!-- currently useless -->

			<!-- This will create class names with underscores instead of camelCase, like "yada_user_profile",
				 which avoids issues in queries with Windows being case insensitive while linux being sensitive
				 but all current Yada native queries would fail so we skip this.
			<property name="hibernate.physical_naming_strategy" value="org.hibernate.boot.model.naming.CamelCaseToUnderscoresNamingStrategy" />
			-->
		</properties>
	</persistence-unit>
</persistence>