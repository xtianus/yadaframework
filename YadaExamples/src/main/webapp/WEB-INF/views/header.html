<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org" xmlns:yada="http://www.yadaframework.net">
<head>
	<th:block th:fragment="headFragment">
		<meta charset="UTF-8"/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1.0,maximum-scale=1">
		<!-- The Bootstrap CDN can be replaced with a locally downloaded copy -->
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">		
		<link th:if="${@config.developmentEnvironment}" rel="stylesheet" type="text/css" th:href="@{/yadares/css/yada.css}" />
	    <link th:if="${!@config.developmentEnvironment}" rel="stylesheet" type="text/css" th:href="@{/res/css/yada.min.css}" />
		<link rel="stylesheet" type="text/css" th:href="@{/res/css/yex.min.css}" />
		<!-- Eventually provide different favicon versions -->
		<link rel="icon" type="image/x-icon" th:href="@{/static/favicons-1.0/favicon.ico}">
	</th:block>
</head>
<body th:remove="tag">
<script th:fragment="yadaReady">
	window.yada = window.yada || {};
	yada.ready = yada.ready || function (fn) {
		if (document.readyState != 'loading'){
			fn();
		} else {
			document.addEventListener('DOMContentLoaded', fn);
		}
	}
</script>

<header th:with="loggedIn=${@yadaSecurityUtil.loggedIn()}">
	<div th:if="${loggedIn and @userSession.impersonationActive}" class="yadaImpersonationBanner">
		<a th:href="@{/dashboard/user/deimpersonate}">
			<span>Impersonating <strong th:text="${@userSession.currentUserProfile.userCredentials.username}">John Doe</strong></span>
		    <button type="button" class="btn-close" aria-label="Close Impersonation"></button>
		</a>
	</div>

	<div class="container">
		<a th:href="@{/}">Home</a> - <a th:href="@{/dashboard}">Dashboard</a>
	
		<div class="float-end">
			<a th:unless="${loggedIn}" th:href="@{/openLogin}" class="yadaAjax">
				Login
			</a>
			<span th:if="${loggedIn}">[[${@yadaSecurityUtil.username}]] - </span>
			<a th:if="${loggedIn}" th:href="@{/logout}">
				Logout
			</a>
		</div>
	</div>
	
</header>
</body>
</html>
